**------------------------------------------------------------------------------------------------
* @header_start
* WebGrab+Plus ini for grabbing EPG data from TvGuide websites
* @Site: tv.yandex.ru
* @MinSWversion:
* @Revision 0 - [02/03/2016] Blackbear199
*     - creation
* @Remarks: your_remarks
* @header_end
**------------------------------------------------------------------------------------------------

site {url=tv.yandex.ru|timezone=UTC+03:00|maxdays=14|cultureinfo=ru-RU|charset=UTF-8|titlematchfactor=90|allowpageoverlaps}
site {ratingsystem=RU|episodesystem=onscreen|firstshow=0|firstday=0000000}
url_index{url|https://tv.yandex.ru/213/channels/|channel|?date=|urldate|&period=all-day}
urldate.format {datestring|yyyy-MM-dd}
*
url_index.headers {customheader=Accept-Encoding=gzip,deflate}
index_urlshow.headers {customheader=Accept-Encoding=gzip,deflate}
*
index_showsplit.scrub {multi|<div class="b-tv-channel-schedule__item">|"tv-event":|</div></a>|<div class="b-tv-channel-content__text">}
index_start.scrub {single|<span class="tv-event__time-text">||</span>|</span>}
index_title.scrub {single(separator=". " include=first)|<div class="tv-event__title-inner">||</div>|</div>}
index_episode.scrub {single(separator=". " include=last)|<div class="tv-event__title-inner">||</div>|</div>}
index_episode.modify {clear('index_title'=='index_episode')}
index_category.scrub {single|"genre":"||"|"}
*
index_temp_1.scrub {single|"programId":||,|,} *program id
index_temp_2.scrub {single|"eventId":||,|,} *event id
index_urlshow.modify {set|https://tv.yandex.ru/213/program/'index_temp_1'?eventId='index_temp_2'}
*
title.scrub {single|<div class="b-content__text b-tv-program-content__text">||</div>|</div>}
description.scrub {single|<div class="b-tv-program-description__description">|<span>|</span>|<span } 
director.scrub {single|Режиссер:</td><td class="b-tv-program-details__info-value">|<span>|</span>|</td>}
actor.scrub {multi|В ролях:</td><td class="b-tv-program-details__info-value">|<span>|</span>|</td>}
presenter.scrub {multi|Ведущие:</td><td class="b-tv-program-details__info-value">|<span>|</span>|</td>}
rating.scrub {multi|досуг</div><div class="tv-program-meta__age-restriction">||</div>|</div>}
productiondate.scrub {single|Произведено:|<td class="b-tv-program-details__info-value">|</td>|</tr>}
*
**  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _
**      #####  CHANNEL FILE CREATION (only to create the xxx-channel.xml file)
**
** @auto_xml_channel_start
*url_index{url|https://tv.yandex.ru/ajax/?params=%5B%7B%22name%22%3A%22i-tv-region%22%2C%22method%22%3A%22get%22%2C%22args%22%3A%7B%22params%22%3A%22%7B%5C%22type%5C%22%3A%5C%22regional%5C%22%2C%5C%22packageIds%5C%22%3A%5B%5D%2C%5C%22limit%5C%22%3A500%2C%5C%22fields%5C%22%3A%5C%22schedules%2Cchannels%2Cfinish%2Cchannel%2Cid%2Ctitle%2Cfavourite%5C%22%2C%5C%22lang%5C%22%3A%5C%22ru%5C%22%7D%22%2C%22cacheKey%22%3A%22channels%3Fparams%3D%7B%5C%22type%5C%22%3A%5C%22regional%5C%22%2C%5C%22packageIds%5C%22%3A%5B%5D%2C%5C%22limit%5C%22%3A500%2C%5C%22fields%5C%22%3A%5B%5C%22schedules%5C%22%2C%5C%22channels%5C%22%2C%5C%22finish%5C%22%2C%5C%22channel%5C%22%2C%5C%22id%5C%22%2C%5C%22title%5C%22%2C%5C%22favourite%5C%22%5D%7D%22%2C%22userRegion%22%3A%22213%22%2C%22resource%22%3A%22channels%22%2C%22ncrd%22%3A1456919669965%7D%7D%2C%7B%22name%22%3A%22i-tv-region%22%2C%22method%22%3A%22get%22%2C%22args%22%3A%7B%22params%22%3A%22%7B%5C%22type%5C%22%3A%5C%22local%5C%22%2C%5C%22packageIds%5C%22%3A%5B%5D%2C%5C%22limit%5C%22%3A500%2C%5C%22fields%5C%22%3A%5C%22schedules%2Cchannels%2Cfinish%2Cchannel%2Cid%2Ctitle%2Cfavourite%5C%22%2C%5C%22lang%5C%22%3A%5C%22ru%5C%22%7D%22%2C%22cacheKey%22%3A%22channels%3Fparams%3D%7B%5C%22type%5C%22%3A%5C%22local%5C%22%2C%5C%22packageIds%5C%22%3A%5B%5D%2C%5C%22limit%5C%22%3A500%2C%5C%22fields%5C%22%3A%5B%5C%22schedules%5C%22%2C%5C%22channels%5C%22%2C%5C%22finish%5C%22%2C%5C%22channel%5C%22%2C%5C%22id%5C%22%2C%5C%22title%5C%22%2C%5C%22favourite%5C%22%5D%7D%22%2C%22userRegion%22%3A%22213%22%2C%22resource%22%3A%22channels%22%2C%22ncrd%22%3A1456919669965%7D%7D%2C%7B%22name%22%3A%22i-tv-region%22%2C%22method%22%3A%22get%22%2C%22args%22%3A%7B%22params%22%3A%22%7B%5C%22type%5C%22%3A%5C%22satelite%5C%22%2C%5C%22packageIds%5C%22%3A%5B%5D%2C%5C%22limit%5C%22%3A500%2C%5C%22fields%5C%22%3A%5C%22schedules%2Cchannels%2Cfinish%2Cchannel%2Cid%2Ctitle%2Cfavourite%5C%22%2C%5C%22lang%5C%22%3A%5C%22ru%5C%22%7D%22%2C%22cacheKey%22%3A%22channels%3Fparams%3D%7B%5C%22type%5C%22%3A%5C%22satelite%5C%22%2C%5C%22packageIds%5C%22%3A%5B%5D%2C%5C%22limit%5C%22%3A500%2C%5C%22fields%5C%22%3A%5B%5C%22schedules%5C%22%2C%5C%22channels%5C%22%2C%5C%22finish%5C%22%2C%5C%22channel%5C%22%2C%5C%22id%5C%22%2C%5C%22title%5C%22%2C%5C%22favourite%5C%22%5D%7D%22%2C%22userRegion%22%3A%22213%22%2C%22resource%22%3A%22channels%22%2C%22ncrd%22%3A1456919669965%7D%7D%5D&sk=2811668cb3a314a1507d71e82b089e1d&userRegion=213&resource=null&ncrd=1456919670038}
*index_site_id.scrub {multi|\"id\":||}|}}
*index_site_channel.scrub {multi|\"title\":\"||\"|"\}
*index_site_id.modify {cleanup(removeduplicates=equal,100 link="index_site_channel")}
** @auto_xml_channel_end


